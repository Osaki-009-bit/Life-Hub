<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Life-Hub Schedule MAX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .active-day { background-color: #2563eb !important; color: white !important; transform: scale(1.1); font-weight: 900; }
        .past-event { opacity: 0.4; filter: grayscale(1); }
        .current-event { border: 4px solid #2563eb; background-color: #eff6ff; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4); } 70% { box-shadow: 0 0 0 15px rgba(37, 99, 235, 0); } 100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); } }
        input { height: 60px; font-size: 16px !important; }
    </style>
</head>
<body class="bg-gray-100 pb-32 text-left">

    <div id="urgentAlert" class="hidden bg-red-600 text-white p-5 text-center font-[900] text-lg uppercase tracking-widest sticky top-0 z-50 shadow-2xl">
        </div>

    <div class="bg-white shadow-xl px-5 pt-8 pb-6 rounded-b-[2.5rem]">
        <h1 class="text-2xl font-[900] italic tracking-tighter text-blue-900 uppercase mb-6 text-center">Life-Hub <span class="text-blue-500">SCHEDULE</span></h1>
        
        <div class="flex justify-between gap-2 overflow-x-auto pb-2 no-scrollbar">
            <button onclick="setDay(1)" class="day-btn flex-1 min-w-[50px] py-4 bg-gray-100 rounded-2xl text-xs font-black transition-all" data-day="1">Âë®‰∏Ä</button>
            <button onclick="setDay(2)" class="day-btn flex-1 min-w-[50px] py-4 bg-gray-100 rounded-2xl text-xs font-black transition-all" data-day="2">Âë®‰∫å</button>
            <button onclick="setDay(3)" class="day-btn flex-1 min-w-[50px] py-4 bg-gray-100 rounded-2xl text-xs font-black transition-all" data-day="3">Âë®‰∏â</button>
            <button onclick="setDay(4)" class="day-btn flex-1 min-w-[50px] py-4 bg-gray-100 rounded-2xl text-xs font-black transition-all" data-day="4">Âë®Âõõ</button>
            <button onclick="setDay(5)" class="day-btn flex-1 min-w-[50px] py-4 bg-gray-100 rounded-2xl text-xs font-black transition-all" data-day="5">Âë®‰∫î</button>
            <button onclick="setDay(6)" class="day-btn flex-1 min-w-[50px] py-4 bg-gray-100 rounded-2xl text-xs font-black transition-all" data-day="6">Âë®ÂÖ≠</button>
            <button onclick="setDay(0)" class="day-btn flex-1 min-w-[50px] py-4 bg-gray-100 rounded-2xl text-xs font-black transition-all" data-day="0">Âë®Êó•</button>
        </div>
    </div>

    <div class="mx-5 my-6 p-7 bg-white rounded-[3rem] shadow-2xl space-y-5 border border-gray-50">
        <div class="text-center mb-2">
            <span class="px-6 py-1 bg-gray-900 text-white text-[10px] font-black rounded-full uppercase tracking-widest">Add Course</span>
        </div>

        <input type="text" id="courseName" placeholder="ËØæÁ®ãÂêçÁß∞ (e.g. Èí¢Áê¥ËØæ)" class="w-full p-4 border-2 border-gray-100 rounded-2xl bg-gray-50 text-base font-[900] outline-none focus:border-blue-500">

        <div class="grid grid-cols-2 gap-4">
            <div class="space-y-1">
                <label class="text-[10px] font-black text-gray-400 ml-2 uppercase">ÂºÄÂßãÊó∂Èó¥</label>
                <input type="time" id="startTime" class="w-full p-4 border-2 border-gray-100 rounded-2xl bg-gray-50 text-base font-black outline-none">
            </div>
            <div class="space-y-1">
                <label class="text-[10px] font-black text-gray-400 ml-2 uppercase">ÁªìÊùüÊó∂Èó¥</label>
                <input type="time" id="endTime" class="w-full p-4 border-2 border-gray-100 rounded-2xl bg-gray-50 text-base font-black outline-none">
            </div>
        </div>

        <input type="text" id="location" placeholder="‰∏äËØæÂú∞ÁÇπ (e.g. 302ÊïôÂÆ§)" class="w-full p-4 border-2 border-gray-100 rounded-2xl bg-gray-50 text-sm font-black outline-none">

        <button onclick="saveCourse()" class="w-full bg-blue-600 text-white h-20 rounded-[2rem] font-[900] text-lg shadow-2xl active:scale-[0.96] transition-all uppercase tracking-widest">Commit Schedule</button>
    </div>

    <div id="courseList" class="px-5 space-y-4 pb-12"></div>

    <div class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-gray-100 flex justify-around p-6 z-40">
        <a href="price.html" class="flex flex-col items-center text-gray-400">
            <span class="text-[10px] font-black uppercase tracking-widest">Analytics</span>
        </a>
        <a href="schedule.html" class="flex flex-col items-center text-blue-600">
            <div class="w-2 h-2 bg-blue-600 rounded-full mb-1 shadow-lg shadow-blue-300"></div>
            <span class="text-[10px] font-black uppercase tracking-widest">Schedule</span>
        </a>
    </div>

    <script>
        let courses = JSON.parse(localStorage.getItem('lh_schedule_max_v1') || '[]');
        let currentDay = new Date().getDay(); // ÈªòËÆ§ÊòæÁ§∫‰ªäÂ§©

        function setDay(day) {
            currentDay = day;
            renderCourses();
        }

        function saveCourse() {
            const name = document.getElementById('courseName').value;
            const start = document.getElementById('startTime').value;
            const end = document.getElementById('endTime').value;
            const loc = document.getElementById('location').value;

            if(!name || !start || !end) return alert("MANAGER: FIELDS MISSING!");

            courses.push({ id: Date.now(), day: currentDay, name, start, end, loc });
            localStorage.setItem('lh_schedule_max_v1', JSON.stringify(courses));
            
            // Ê∏ÖÁ©∫ÂΩïÂÖ•
            document.getElementById('courseName').value = '';
            renderCourses();
        }

        function renderCourses() {
            const listDiv = document.getElementById('courseList');
            const btns = document.querySelectorAll('.day-btn');
            listDiv.innerHTML = '';

            // Êõ¥Êñ∞ÊåâÈíÆÁä∂ÊÄÅ
            btns.forEach(btn => {
                if(parseInt(btn.dataset.day) === currentDay) btn.classList.add('active-day');
                else btn.classList.remove('active-day');
            });

            // Ëé∑ÂèñÂΩìÂ§©ÁöÑËØæÂπ∂ÊéíÂ∫è
            let todays = courses.filter(c => c.day === currentDay).sort((a, b) => a.start.localeCompare(b.start));
            
            const now = new Date();
            const nowTime = now.getHours().toString().padStart(2,'0') + ":" + now.getMinutes().toString().padStart(2,'0');

            todays.forEach(c => {
                let statusClass = "";
                let statusTag = "";

                if (nowTime > c.end) {
                    statusClass = "past-event";
                    statusTag = `<span class="bg-gray-200 text-gray-500 px-3 py-1 rounded-lg text-[10px]">FINISHED</span>`;
                } else if (nowTime >= c.start && nowTime <= c.end) {
                    statusClass = "current-event";
                    statusTag = `<span class="bg-blue-600 text-white px-3 py-1 rounded-lg text-[10px] animate-pulse">ON GOING</span>`;
                } else {
                    statusTag = `<span class="bg-green-100 text-green-600 px-3 py-1 rounded-lg text-[10px]">UPCOMING</span>`;
                }

                listDiv.innerHTML += `
                    <div class="bg-white p-7 rounded-[2.5rem] shadow-xl flex justify-between items-center transition-all ${statusClass}">
                        <div>
                            <div class="flex items-center gap-3 mb-2">
                                <span class="text-xl font-[900] text-gray-900">${c.name}</span>
                                ${statusTag}
                            </div>
                            <p class="text-sm font-black text-blue-600 uppercase tracking-tighter">${c.start} ‚Äî ${c.end}</p>
                            <p class="text-[11px] font-bold text-gray-400 mt-2 uppercase">üìç ${c.loc || 'No Location'}</p>
                        </div>
                        <button onclick="deleteCourse(${c.id})" class="text-red-300 active:text-red-600 p-2 text-xl">‚úï</button>
                    </div>
                `;
            });
            updateUrgentAlert();
        }

        function deleteCourse(id) {
            if(confirm("Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÊù°ÂÆâÊéíÂêóÔºåÁªèÁêÜÔºü")) {
                courses = courses.filter(c => c.id !== id);
                localStorage.setItem('lh_schedule_max_v1', JSON.stringify(courses));
                renderCourses();
            }
        }

        function updateUrgentAlert() {
            const alertBar = document.getElementById('urgentAlert');
            const now = new Date();
            const today = now.getDay();
            
            let todayUpcoming = courses.filter(c => c.day === today).sort((a,b) => a.start.localeCompare(b.start));
            
            let found = false;
            for(let c of todayUpcoming) {
                let [h, m] = c.start.split(':').map(Number);
                let startTime = new Date();
                startTime.setHours(h, m, 0);
                
                let diff = (startTime - now) / 1000 / 60; // ÂàÜÈíüÂ∑Æ

                if(diff > 0 && diff <= 30) {
                    alertBar.innerText = `Ë∑ùÁ¶ª ${c.name} ÂºÄÂßãËøòÊúâ ${Math.floor(diff)} ÂàÜÈíü`;
                    alertBar.classList.remove('hidden');
                    found = true;
                    break;
                }
            }
            if(!found) alertBar.classList.add('hidden');
        }

        // ÊØè‰∏ÄÂàÜÈíüËá™Âä®Âà∑Êñ∞‰∏ÄÊ¨°È°µÈù¢Áä∂ÊÄÅ
        setInterval(renderCourses, 60000);
        renderCourses();
    </script>
</body>
</html>
